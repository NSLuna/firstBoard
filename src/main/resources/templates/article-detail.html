<!--<!DOCTYPE html>-->
<!--<html lang="ko" xmlns:th="http://www.thymeleaf.org">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title th:text="${article.title}">ê²Œì‹œê¸€</title>-->
<!--    <meta name="_csrf" th:content="${_csrf.token}">-->
<!--    <meta name="_csrf_header" th:content="${_csrf.headerName}">-->
<!--</head>-->
<!--<body>-->
<!--<h1 th:text="${article.title}">ì œëª©</h1>-->
<!--<pre style="white-space: pre-wrap;">[[${article.content}]]</pre>-->

<!--<p>-->
<!--    <a th:href="@{'/articles/' + ${article.id} + '/edit'}">ìˆ˜ì •</a>-->
<!--    <a href="/articles">ëª©ë¡</a>-->

<!--</p>-->
<!--<form th:action="@{'/articles/' + ${article.id} + '/delete'}" method="post" style="margin-top:12px;">-->
<!--&lt;!&ndash;    <button type="submit" onclick="return confirm('ë‹ˆ ì§€ì§œ ì§€ìš¸ë¼ê°€?');">ì‚­ì œ</button>&ndash;&gt;-->
<!--<input type = "hidden" id="article-id" th:value="${article.id}" />-->
<!--<button type="button" id="delete-btn">ì‚­ì œ</button>-->
<!--<script src="/article.js" defer></script>-->
<!--</form>-->
<!--</body>-->
<!--</html>-->

<!--<!DOCTYPE html>-->
<!--<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/extras/spring-security">-->
<!--<head>-->
<!--    <meta charset="UTF-8">-->
<!--    <meta name="viewport" content="width=device-width, initial-scale=1.0">-->
<!--    <title th:text="${article.title}">ê²Œì‹œê¸€</title>-->
<!--    <meta name="_csrf" th:content="${_csrf.token}">-->
<!--    <meta name="_csrf_header" th:content="${_csrf.headerName}">-->
<!--</head>-->
<!--<body>-->
<!--<header>-->
<!--    <a href="/" class="brand">ğŸŒ€ ì„ì‹œë¡œê³ </a>-->
<!--    <div>-->
<!--      <span sec:authorize="isAnonymous()">-->
<!--        <a href="/login">ë¡œê·¸ì¸</a>-->
<!--        <a href="/join">íšŒì›ê°€ì…</a>-->
<!--      </span>-->
<!--        <span sec:authorize="isAuthenticated()">-->
<!--        <span>ì•ˆë…•í•˜ì„¸ìš”, <strong th:text="${displayName}"></strong>ë‹˜!</span>-->
<!--        <form method="post" action="/logout" style="display:inline;">-->
<!--          <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">-->
<!--          <button type="submit">ë¡œê·¸ì•„ì›ƒ</button>-->
<!--        </form>-->
<!--      </span>-->
<!--    </div>-->
<!--</header>-->
<!--<main>-->
<!--    <h1 th:text="${article.title}">ì œëª©</h1>-->
<!--    <input type="hidden" id="article-id" th:value="${article.id}">-->
<!--    <div th:text="${article.content}">ë‚´ìš©</div>-->

<!--    <div th:if="${isOwner}">-->
<!--        <a th:href="@{'/articles/' + ${article.id} + '/edit'}" id="modify-btn-link">ìˆ˜ì •</a>-->
<!--        <button id="delete-btn">ì‚­ì œ</button>-->
<!--    </div>-->

<!--    <p><a href="/blog">ëª©ë¡</a></p>-->
<!--</main>-->
<!--<script src="/js/article.js" defer></script>-->
<!--</body>-->
<!--</html>-->

<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title th:text="|${article != null ? article.title : 'ê¸€ ìƒì„¸'}|">ê¸€ ìƒì„¸</title>

    <!-- CSRF (í¼/JSì—ì„œ ì‚¬ìš©) -->
    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />

    <style>
        :root{--bg:#f8fafc;--card:#fff;--ink:#1f2937;--muted:#6b7280;--brand:#7c83ff;--radius:18px;--shadow:0 10px 30px rgba(31,41,55,.08)}
        body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,'Noto Sans KR',sans-serif}
        .wrap{max-width:900px;margin:26px auto;padding:0 18px}
        .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:22px}
        .meta{color:var(--muted);font-size:14px;margin-top:6px}
        .actions{display:flex;gap:10px;margin-top:16px}
        .btn{appearance:none;border:0;border-radius:12px;padding:10px 14px;font-weight:700;cursor:pointer}
        .btn-primary{background:var(--brand);color:#fff}
        .btn-ghost{background:#fff;border:1px solid #e5e7eb}
        .back{display:inline-block;margin:12px 0;color:var(--muted);text-decoration:none}
        pre{white-space:pre-wrap;word-break:break-word;line-height:1.6}
    </style>
</head>
<body>
<div class="wrap">
    <a class="back" th:href="@{/blog}">â† ë¸”ë¡œê·¸ë¡œ ëŒì•„ê°€ê¸°</a>

    <article class="card" th:if="${article != null}">
        <h1 th:text="${article.title}">ì œëª©</h1>

        <div class="meta">
            <!-- ì‘ì„±ì: name ì—†ìœ¼ë©´ email, ë‘˜ ë‹¤ ì—†ìœ¼ë©´ ìµëª… -->
            <span th:text="${article.author != null ? (article.author.name != null ? article.author.name : (article.author.email != null ? article.author.email : 'ìµëª…')) : 'ìµëª…'}">ì‘ì„±ì</span>
            <span th:if="${article.createdAt != null}"
                  th:text="${#temporals.format(article.createdAt,'yyyy.MM.dd HH:mm')}"></span>

            <!-- ë‚ ì§œ: ë¼ì´ë¸ŒëŸ¬ë¦¬ ì—†ì´ë„ ì•ˆì „í•˜ê²Œ (ì›ì‹œê°’ ì¶œë ¥) -->
            <span th:if="${article.createdAt != null}"
                  th:text="${article.createdAt}">2025-01-01T12:00</span>

            <!-- â€» ë§Œì•½ í¬ë§·íŒ… ë¼ì´ë¸ŒëŸ¬ë¦¬ ì¶”ê°€í–ˆë‹¤ë©´ ìœ„ í•œ ì¤„ ëŒ€ì‹  ì•„ë˜ ë‘ ì¤„ ì‚¬ìš©
            <span th:if="${article.createdAt != null}"
                  th:text="${#temporals.format(article.createdAt,'yyyy.MM.dd HH:mm')}">2025.01.01 12:00</span>
            -->
        </div>

        <pre th:text="${article.content != null ? article.content : ''}" style="margin-top:16px">ë‚´ìš©</pre>

        <!-- ë³¸ì¸ ê¸€ì¼ ë•Œë§Œ ìˆ˜ì •/ì‚­ì œ ë²„íŠ¼ -->
        <div class="actions" th:if="${isOwner}">
            <a class="btn btn-ghost" th:href="@{'/articles/' + ${article.id} + '/edit'}">ìˆ˜ì •</a>

            <!-- ì‚­ì œ: CSRF í¬í•¨ -->
            <form th:action="@{'/articles/' + ${article.id} + '/delete'}" method="post"
                  onsubmit="return confirm('ì •ë§ ì‚­ì œí• ê¹Œìš”?');">
                <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                <button type="submit" class="btn btn-primary">ì‚­ì œ</button>
            </form>
        </div>
    </article>

    <div th:if="${article == null}">
        ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê¸€ì…ë‹ˆë‹¤.
    </div>
</div>
</body>
</html>
